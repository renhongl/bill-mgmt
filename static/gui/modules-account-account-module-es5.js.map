{"version":3,"sources":["src/app/modules/account/account.component.html","src/app/modules/account/account.component.scss","src/app/modules/account/account.component.ts","src/app/modules/account/account.module.ts","src/app/modules/account/account.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div class=\\\"account\\\">\\r\\n  <app-card width=\\\"100%\\\" height=\\\"100%\\\">\\r\\n    <div class=\\\"content\\\">\\r\\n      <app-bread-crumbs [items]=\\\"items\\\" [path]=\\\"path\\\"></app-bread-crumbs>\\r\\n      <div class=\\\"detail\\\" *ngIf=\\\"user\\\">\\r\\n        <div class=\\\"key\\\">头像</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-upload (handleChange)=\\\"changeAvator($event)\\\" [src]=\\\"src\\\"></app-upload>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">用户名</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-input width=\\\"95%\\\" [value]=\\\"user.username\\\" [disabled]=\\\"true\\\"></app-input>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">邮箱</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-input width=\\\"95%\\\" [value]=\\\"user.mail\\\" [disabled]=\\\"true\\\"></app-input>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">\\r\\n            <app-button width=\\\"100px\\\" (click)=\\\"saveAccount()\\\">保存</app-button>\\r\\n        </div>\\r\\n        \\r\\n      </div>\\r\\n    </div>\\r\\n  </app-card>\\r\\n  <app-message #message></app-message>\\r\\n</div>\\r\\n\"","export default \".account {\\n  width: 100%;\\n  height: 100%;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n          align-items: center;\\n}\\n.account app-card {\\n  width: 50%;\\n  height: 90%;\\n}\\n.account app-card .content {\\n  width: 100%;\\n  height: 100%;\\n  padding: 20px;\\n}\\n.account app-card .content .detail {\\n  width: 100%;\\n  height: 100%;\\n}\\n.account app-card .content .detail .key {\\n  color: var(--default);\\n  margin: 0 auto;\\n  margin-top: 20px;\\n  font-size: 12px;\\n}\\n.account app-card .content .detail .value {\\n  margin: 0 auto;\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9hY2NvdW50L0U6XFxwb21lbG8td29ya3NwYWNlXFxiaWxsLW1nbXQtZ3VpL3NyY1xcYXBwXFxtb2R1bGVzXFxhY2NvdW50XFxhY2NvdW50LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9tb2R1bGVzL2FjY291bnQvYWNjb3VudC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7RUFBQSxhQUFBO0VBQ0Esd0JBQUE7VUFBQSx1QkFBQTtFQUNBLHlCQUFBO1VBQUEsbUJBQUE7QUNDRjtBRENFO0VBQ0UsVUFBQTtFQUNBLFdBQUE7QUNDSjtBRENJO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0FDQ047QURDTTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FDQ1I7QURDUTtFQUNFLHFCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtBQ0NWO0FERVE7RUFDRSxjQUFBO0VBQ0EsZ0JBQUE7QUNBViIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWNjb3VudC9hY2NvdW50LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFjY291bnQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gIGFwcC1jYXJkIHtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBoZWlnaHQ6IDkwJTtcclxuXHJcbiAgICAuY29udGVudCB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIHBhZGRpbmc6IDIwcHg7XHJcblxyXG4gICAgICAuZGV0YWlsIHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcblxyXG4gICAgICAgIC5rZXkge1xyXG4gICAgICAgICAgY29sb3I6IHZhcigtLWRlZmF1bHQpO1xyXG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnZhbHVlIHtcclxuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLmFjY291bnQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIHtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA5MCU7XG59XG4uYWNjb3VudCBhcHAtY2FyZCAuY29udGVudCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBhZGRpbmc6IDIwcHg7XG59XG4uYWNjb3VudCBhcHAtY2FyZCAuY29udGVudCAuZGV0YWlsIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIC5jb250ZW50IC5kZXRhaWwgLmtleSB7XG4gIGNvbG9yOiB2YXIoLS1kZWZhdWx0KTtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIC5jb250ZW50IC5kZXRhaWwgLnZhbHVlIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59Il19 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { AccountService } from './account.service';\r\nimport { SERVER } from '../../utils/url';\r\nimport { Success } from 'src/app/types/response';\r\n\r\n@Component({\r\n  selector: 'app-account',\r\n  templateUrl: './account.component.html',\r\n  styleUrls: ['./account.component.scss']\r\n})\r\nexport class AccountComponent implements OnInit {\r\n\r\n  items = ['主页', '账号'];\r\n  path = ['/', '/account'];\r\n  avator = JSON.parse(localStorage.getItem('bill-user')).avator;\r\n  src = SERVER + '/' + JSON.parse(localStorage.getItem('bill-user')).avator;\r\n  user = null;\r\n  @ViewChild('message', {static: false}) message;\r\n\r\n  constructor(private accSer: AccountService) { }\r\n\r\n  ngOnInit() {\r\n    this.user = JSON.parse(localStorage.getItem('bill-user'));\r\n  }\r\n\r\n  changeAvator(e) {\r\n    const file = e.target.files[0];\r\n    this.accSer.uploadFile(file, 'avator').subscribe((result: any) => {\r\n      this.avator = result.imagePath;\r\n      this.src = SERVER + '/' + result.imagePath;\r\n    });\r\n  }\r\n\r\n  saveAccount() {\r\n    const user = {\r\n      avator: this.avator,\r\n    };\r\n    this.accSer.updateAccount(user).subscribe((result: Success) => {\r\n      if (result.code === 200) {\r\n        this.message.open('更新账号成功', 'success');\r\n        this.accSer.getUser().subscribe((result: Success) => {\r\n          this.avator = result.data.avator;\r\n          this.src = SERVER + '/' + result.data.avator;\r\n          localStorage.setItem('bill-user', JSON.stringify(result.data));\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AccountComponent } from './account.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CommonCompsModule } from '../../shared/commonComps';\r\n\r\nconst AccountRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AccountComponent,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [AccountComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(AccountRoutes),\r\n    CommonCompsModule,\r\n  ]\r\n})\r\nexport class AccountModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport URL from '../../utils/url';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AccountService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getUser() {\r\n    const id = JSON.parse(localStorage.getItem('bill-user'))._id;\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.get(`${URL.USER}/${id}`, options);\r\n  }\r\n\r\n  uploadFile(file: any, type: string) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.post(`${URL.FILE}/${type}`, formData, options);\r\n  }\r\n\r\n  updateAccount(user: any) {\r\n    const id = JSON.parse(localStorage.getItem('bill-user'))._id;\r\n    const postData = user;\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.put(`${URL.USER}/${id}`, postData, options);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"modules-account-account-module-es5.js"}