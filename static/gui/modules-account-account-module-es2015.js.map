{"version":3,"sources":["./src/app/modules/account/account.component.html","./src/app/modules/account/account.component.scss","./src/app/modules/account/account.component.ts","./src/app/modules/account/account.module.ts","./src/app/modules/account/account.service.ts"],"names":[],"mappings":"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","file":"modules-account-account-module-es2015.js","sourcesContent":["export default \"<div class=\\\"account\\\">\\r\\n  <app-card width=\\\"100%\\\" height=\\\"100%\\\">\\r\\n    <div class=\\\"content\\\">\\r\\n      <app-bread-crumbs [items]=\\\"items\\\" [path]=\\\"path\\\"></app-bread-crumbs>\\r\\n      <div class=\\\"detail\\\" *ngIf=\\\"user\\\">\\r\\n        <div class=\\\"key\\\">头像</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-upload (handleChange)=\\\"changeAvator($event)\\\" [src]=\\\"src\\\"></app-upload>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">用户名</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-input width=\\\"95%\\\" [value]=\\\"user.username\\\" [disabled]=\\\"true\\\"></app-input>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">邮箱</div>\\r\\n        <div class=\\\"value\\\">\\r\\n          <app-input width=\\\"95%\\\" [value]=\\\"user.mail\\\" [disabled]=\\\"true\\\"></app-input>\\r\\n        </div>\\r\\n        <div class=\\\"key\\\">\\r\\n            <app-button width=\\\"100px\\\" (click)=\\\"saveAccount()\\\">保存</app-button>\\r\\n        </div>\\r\\n        \\r\\n      </div>\\r\\n    </div>\\r\\n  </app-card>\\r\\n  <app-message #message></app-message>\\r\\n</div>\\r\\n\"","export default \".account {\\n  width: 100%;\\n  height: 100%;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n          align-items: center;\\n}\\n.account app-card {\\n  width: 50%;\\n  height: 90%;\\n}\\n.account app-card .content {\\n  width: 100%;\\n  height: 100%;\\n  padding: 20px;\\n}\\n.account app-card .content .detail {\\n  width: 100%;\\n  height: 100%;\\n}\\n.account app-card .content .detail .key {\\n  color: var(--default);\\n  margin: 0 auto;\\n  margin-top: 20px;\\n  font-size: 12px;\\n}\\n.account app-card .content .detail .value {\\n  margin: 0 auto;\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9hY2NvdW50L0U6XFxwb21lbG8td29ya3NwYWNlXFxiaWxsLW1nbXQtZ3VpL3NyY1xcYXBwXFxtb2R1bGVzXFxhY2NvdW50XFxhY2NvdW50LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9tb2R1bGVzL2FjY291bnQvYWNjb3VudC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7RUFBQSxhQUFBO0VBQ0Esd0JBQUE7VUFBQSx1QkFBQTtFQUNBLHlCQUFBO1VBQUEsbUJBQUE7QUNDRjtBRENFO0VBQ0UsVUFBQTtFQUNBLFdBQUE7QUNDSjtBRENJO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0FDQ047QURDTTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FDQ1I7QURDUTtFQUNFLHFCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtBQ0NWO0FERVE7RUFDRSxjQUFBO0VBQ0EsZ0JBQUE7QUNBViIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWNjb3VudC9hY2NvdW50LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFjY291bnQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gIGFwcC1jYXJkIHtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBoZWlnaHQ6IDkwJTtcclxuXHJcbiAgICAuY29udGVudCB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIHBhZGRpbmc6IDIwcHg7XHJcblxyXG4gICAgICAuZGV0YWlsIHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcblxyXG4gICAgICAgIC5rZXkge1xyXG4gICAgICAgICAgY29sb3I6IHZhcigtLWRlZmF1bHQpO1xyXG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnZhbHVlIHtcclxuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLmFjY291bnQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIHtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA5MCU7XG59XG4uYWNjb3VudCBhcHAtY2FyZCAuY29udGVudCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBhZGRpbmc6IDIwcHg7XG59XG4uYWNjb3VudCBhcHAtY2FyZCAuY29udGVudCAuZGV0YWlsIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIC5jb250ZW50IC5kZXRhaWwgLmtleSB7XG4gIGNvbG9yOiB2YXIoLS1kZWZhdWx0KTtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cbi5hY2NvdW50IGFwcC1jYXJkIC5jb250ZW50IC5kZXRhaWwgLnZhbHVlIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59Il19 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { AccountService } from './account.service';\r\nimport { SERVER } from '../../utils/url';\r\nimport { Success } from 'src/app/types/response';\r\n\r\n@Component({\r\n  selector: 'app-account',\r\n  templateUrl: './account.component.html',\r\n  styleUrls: ['./account.component.scss']\r\n})\r\nexport class AccountComponent implements OnInit {\r\n\r\n  items = ['主页', '账号'];\r\n  path = ['/', '/account'];\r\n  avator = JSON.parse(localStorage.getItem('bill-user')).avator;\r\n  src = SERVER + '/' + JSON.parse(localStorage.getItem('bill-user')).avator;\r\n  user = null;\r\n  @ViewChild('message', {static: false}) message;\r\n\r\n  constructor(private accSer: AccountService) { }\r\n\r\n  ngOnInit() {\r\n    this.user = JSON.parse(localStorage.getItem('bill-user'));\r\n  }\r\n\r\n  changeAvator(e) {\r\n    const file = e.target.files[0];\r\n    this.accSer.uploadFile(file, 'avator').subscribe((result: any) => {\r\n      this.avator = result.imagePath;\r\n      this.src = SERVER + '/' + result.imagePath;\r\n    });\r\n  }\r\n\r\n  saveAccount() {\r\n    const user = {\r\n      avator: this.avator,\r\n    };\r\n    this.accSer.updateAccount(user).subscribe((result: Success) => {\r\n      if (result.code === 200) {\r\n        this.message.open('更新账号成功', 'success');\r\n        this.accSer.getUser().subscribe((result: Success) => {\r\n          this.avator = result.data.avator;\r\n          this.src = SERVER + '/' + result.data.avator;\r\n          localStorage.setItem('bill-user', JSON.stringify(result.data));\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AccountComponent } from './account.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CommonCompsModule } from '../../shared/commonComps';\r\n\r\nconst AccountRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AccountComponent,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [AccountComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(AccountRoutes),\r\n    CommonCompsModule,\r\n  ]\r\n})\r\nexport class AccountModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport URL from '../../utils/url';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AccountService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getUser() {\r\n    const id = JSON.parse(localStorage.getItem('bill-user'))._id;\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.get(`${URL.USER}/${id}`, options);\r\n  }\r\n\r\n  uploadFile(file: any, type: string) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.post(`${URL.FILE}/${type}`, formData, options);\r\n  }\r\n\r\n  updateAccount(user: any) {\r\n    const id = JSON.parse(localStorage.getItem('bill-user'))._id;\r\n    const postData = user;\r\n    const headers = new HttpHeaders({\r\n      token: localStorage.getItem('bill-token'),\r\n    });\r\n    const options = {\r\n      headers,\r\n     };\r\n    return this.http.put(`${URL.USER}/${id}`, postData, options);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}